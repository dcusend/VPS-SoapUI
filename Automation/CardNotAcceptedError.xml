<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="55a02773-3853-4425-9726-514d049063ef" discardOkResults="false" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="CardNotAcceptedError" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="55a02773-3853-4425-9726-514d049063effileName">CardNotAcceptedError</con:setting>
  </con:settings>
  <con:testStep type="request" id="8b456086-b10f-4049-86ab-85a7b606840a" name="SubmitPPIPayment-Sale">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PPIServiceFacadeSoap</con:interface>
      <con:operation>SubmitPPIPayment</con:operation>
      <con:request name="SubmitPPIPayment-Sale" id="cca17b28-ce9c-4350-90f9-d7d63fce8108" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://qa.velocitypayment.com:443/vgateway/VGatewayWebService</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="https://www.velocitypayment.com/ws" xmlns:ppi="http://www.ePayments.com/PPI" xmlns:ppip="http://www.ePayments.com/PPIPayment">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:SubmitPPIPayment>
         <!--Optional:-->
         <ws:token>
            <!--Optional:-->
            <!--Optional:-->
            <!--Optional:-->
            <!--Optional:-->
            <ppi:UserName>user759</ppi:UserName>
            <ppi:Password>pwd759</ppi:Password>
            <ppi:PPITransactionRequestId>sdfsdf345r56456rgfsd</ppi:PPITransactionRequestId>
            <ppi:PPIBusinessEntityIdentifierToken>759</ppi:PPIBusinessEntityIdentifierToken>
         </ws:token>
         <!--Optional:-->
         <ws:payment Notes="">
            <!--Optional:-->
            <ppi:AdditionalInfo>
               <!--Zero or more repetitions:-->
               <ppi:Fees>
                  <ppip:FeeType>Customer</ppip:FeeType>
                  <ppip:Amount>0</ppip:Amount>
               </ppi:Fees>
               <!--Zero or more repetitions:-->
               <!--Zero or more repetitions:-->
               <ppi:PaymentSegment>
                  <ppip:Amount>10.50</ppip:Amount>
                  <ppip:SegmentType>Enter Amount</ppip:SegmentType>
                  <!--Optional:-->
               </ppi:PaymentSegment>
               <!--Optional:-->
               <ppi:PaymentType>Regular</ppi:PaymentType>
               <ppi:ProcessDate>${DataGenDateTest#TodayDate}</ppi:ProcessDate>
               <!--Zero or more repetitions:-->
            </ppi:AdditionalInfo>
            <ppi:ClientAccountNumber>365214002</ppi:ClientAccountNumber>
            <!--Optional:-->
            <!--Optional:-->
            <ppi:PreAuthorizeOnly>false</ppi:PreAuthorizeOnly>
            <ppi:PaymentSource/>
            <!--Optional:-->
            <ppi:Payor>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <ppi:AddressLine1>2311 yorka roada</ppi:AddressLine1>
               <ppi:PhoneNumber>45454545435</ppi:PhoneNumber>
               <ppi:FirstName>dsfsdf</ppi:FirstName>
               <ppi:LastName>dsfsdf</ppi:LastName>
               <ppi:ZipCode>22201</ppi:ZipCode>
               <ppi:BusinessName>sdfsdfsdf</ppi:BusinessName>
               <ppi:IsBusinessName>false</ppi:IsBusinessName>
            </ppi:Payor>
            <!--Optional:-->
            <ppi:Vehicle>
               <!--Optional:-->
               <ppip:AccountType/>
               <!--Optional:-->
               <ppip:CheckType/>
               <ppip:CheckNumberPosition/>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <ppip:CVV2Code>145</ppip:CVV2Code>
               <ppip:ExpirationDate>12/25</ppip:ExpirationDate>
               <ppip:PaymentVehicleNumber>374245002771003</ppip:PaymentVehicleNumber>
               <ppip:PaymentMethodCategory>CreditCard</ppip:PaymentMethodCategory>
               <ppip:EnforcePinDebitValidation/>
            </ppi:Vehicle>
         </ws:payment><ws:storedCredential>false</ws:storedCredential>
      </ws:SubmitPPIPayment>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="XPath Match" id="56ff2ce6-4917-4f82-a8f2-0c03645a352b" name="Match content of [ns0:ResultCode]">
          <con:configuration>
            <path>declare namespace ns0='http://www.ePayments.com/PPI';
declare namespace ns1='https://www.velocitypayment.com/ws';
//ns1:SubmitPPIPaymentResponse[1]/ns1:SubmitPPIPaymentResult[1]/ns0:ResultCode[1]/text()</path>
            <content>50008</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="60afdca1-2083-4970-935f-91d30ebf8858" name="Match content of [ns0:ResultText]">
          <con:configuration>
            <path>declare namespace ns0='http://www.ePayments.com/PPI';
declare namespace ns1='https://www.velocitypayment.com/ws';
//ns1:SubmitPPIPaymentResponse[1]/ns1:SubmitPPIPaymentResult[1]/ns0:ResultText[1]/text()</path>
            <content>VALIDATION ERROR: Invalid Card</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="b6214603-0bb5-471b-b978-b4f781a96841" name="Match content of [ns0:Success]">
          <con:configuration>
            <path>declare namespace ns0='http://www.ePayments.com/PPI';
declare namespace ns1='https://www.velocitypayment.com/ws';
//ns1:SubmitPPIPaymentResponse[1]/ns1:SubmitPPIPaymentResult[1]/ns0:Success[1]/text()</path>
            <content>false</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig action="https://www.velocitypayment.com/ws/SubmitPPIPayment" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="340ce76f-4c26-4168-ad5e-9f459d02a685">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="f7c5442e-cf88-4b73-8907-5bc4e0cbc954" name="SubmitPPIPayment-Auth">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>PPIServiceFacadeSoap</con:interface>
      <con:operation>SubmitPPIPayment</con:operation>
      <con:request name="SubmitPPIPayment-Auth" id="cca17b28-ce9c-4350-90f9-d7d63fce8108" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>https://qa.velocitypayment.com:443/vgateway/VGatewayWebService</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="https://www.velocitypayment.com/ws" xmlns:ppi="http://www.ePayments.com/PPI" xmlns:ppip="http://www.ePayments.com/PPIPayment">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:SubmitPPIPayment>
         <!--Optional:-->
         <ws:token>
            <!--Optional:-->
            <!--Optional:-->
            <!--Optional:-->
            <!--Optional:-->
            <ppi:UserName>user759</ppi:UserName>
            <ppi:Password>pwd759</ppi:Password>
            <ppi:PPITransactionRequestId>sdfsdf345r56456rgfsd</ppi:PPITransactionRequestId>
            <ppi:PPIBusinessEntityIdentifierToken>759</ppi:PPIBusinessEntityIdentifierToken>
         </ws:token>
         <!--Optional:-->
         <ws:payment Notes="">
            <!--Optional:-->
            <ppi:AdditionalInfo>
               <!--Zero or more repetitions:-->
               <ppi:Fees>
                  <ppip:FeeType>Customer</ppip:FeeType>
                  <ppip:Amount>0</ppip:Amount>
               </ppi:Fees>
               <!--Zero or more repetitions:-->
               <!--Zero or more repetitions:-->
               <ppi:PaymentSegment>
                  <ppip:Amount>10.50</ppip:Amount>
                  <ppip:SegmentType>Enter Amount</ppip:SegmentType>
                  <!--Optional:-->
               </ppi:PaymentSegment>
               <!--Optional:-->
               <ppi:PaymentType>Regular</ppi:PaymentType>
               <ppi:ProcessDate>${DataGenDateTest#TodayDate}</ppi:ProcessDate>
               <!--Zero or more repetitions:-->
            </ppi:AdditionalInfo>
            <ppi:ClientAccountNumber>365214002</ppi:ClientAccountNumber>
            <!--Optional:-->
            <!--Optional:-->
            <ppi:PreAuthorizeOnly>true</ppi:PreAuthorizeOnly>
            <ppi:PaymentSource/>
            <!--Optional:-->
            <ppi:Payor>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <ppi:AddressLine1>2311 yorka roada</ppi:AddressLine1>
               <ppi:PhoneNumber>45454545435</ppi:PhoneNumber>
               <ppi:FirstName>dsfsdf</ppi:FirstName>
               <ppi:LastName>dsfsdf</ppi:LastName>
               <ppi:ZipCode>22201</ppi:ZipCode>
               <ppi:BusinessName>sdfsdfsdf</ppi:BusinessName>
               <ppi:IsBusinessName>false</ppi:IsBusinessName>
            </ppi:Payor>
            <!--Optional:-->
            <ppi:Vehicle>
               <!--Optional:-->
               <ppip:AccountType/>
               <!--Optional:-->
               <ppip:CheckType/>
               <ppip:CheckNumberPosition/>
               <!--Optional:-->
               <!--Optional:-->
               <!--Optional:-->
               <ppip:CVV2Code>145</ppip:CVV2Code>
               <ppip:ExpirationDate>12/25</ppip:ExpirationDate>
               <ppip:PaymentVehicleNumber>374245002771003</ppip:PaymentVehicleNumber>
               <ppip:PaymentMethodCategory>CreditCard</ppip:PaymentMethodCategory>
               <ppip:EnforcePinDebitValidation/>
            </ppi:Vehicle>
         </ws:payment><ws:storedCredential>false</ws:storedCredential>
      </ws:SubmitPPIPayment>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="XPath Match" id="15e4adb0-ec80-4816-8373-4aacf887a0bc" name="Match content of [ns0:ResultCode]">
          <con:configuration>
            <path>declare namespace ns0='http://www.ePayments.com/PPI';
declare namespace ns1='https://www.velocitypayment.com/ws';
//ns1:SubmitPPIPaymentResponse[1]/ns1:SubmitPPIPaymentResult[1]/ns0:ResultCode[1]/text()</path>
            <content>50008</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="13536c53-2f46-4e19-ba60-6cc0388d8a21" name="Match content of [ns0:ResultText]">
          <con:configuration>
            <path>declare namespace ns0='http://www.ePayments.com/PPI';
declare namespace ns1='https://www.velocitypayment.com/ws';
//ns1:SubmitPPIPaymentResponse[1]/ns1:SubmitPPIPaymentResult[1]/ns0:ResultText[1]/text()</path>
            <content>VALIDATION ERROR: Invalid Card</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="fa34f58d-d558-481f-9d0c-a3f8594497c8" name="Match content of [ns0:Success]">
          <con:configuration>
            <path>declare namespace ns0='http://www.ePayments.com/PPI';
declare namespace ns1='https://www.velocitypayment.com/ws';
//ns1:SubmitPPIPaymentResponse[1]/ns1:SubmitPPIPaymentResult[1]/ns0:Success[1]/text()</path>
            <content>false</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig action="https://www.velocitypayment.com/ws/SubmitPPIPayment" mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="340ce76f-4c26-4168-ad5e-9f459d02a685">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="datagen" name="DataGenDateTest" id="282f4418-8633-4edd-a125-a1243d96f337">
    <con:settings/>
    <con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:property type="Script">
        <con:configuration>
          <script>def sdf = new java.text.SimpleDateFormat("yyyy-MM-dd")
return sdf.format(new Date()) + "T08:59:00.000-04:00"</script>
        </con:configuration>
        <con:name>TodayDate</con:name>
        <con:mode>STEP</con:mode>
        <con:shared>false</con:shared>
      </con:property>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:environmentSpec>
    <con:entry environmentId="340ce76f-4c26-4168-ad5e-9f459d02a685">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
